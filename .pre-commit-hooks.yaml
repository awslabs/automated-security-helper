# (c) 2023 Amazon Web Services, Inc. or its affiliates. All Rights Reserved.
# This AWS Content is provided subject to the terms of the AWS Customer Agreement
# available at http://aws.amazon.com/agreement or other written agreement between
# Customer and either Amazon Web Services, Inc. or Amazon Web Services EMEA SARL
# or both.

#
# This pre-commit hook configuration allows the ASH tool
# to be run as a pre-commit hook on the local workstation
# where pre-commit is installed.
#
# The configuration parameters below turn on "verbose"
# output, so that even when the hook returns success (0)
# the output from the run of the ASH tool will be displayed
# to the user.
#
# The supported stages are listed below, including the
# "manual" stage.  Users of this hook may want to limit
# the stages where this hook runs to only "manual" since
# the ASH tool can take several minutes to complete.
#
# Output from the run of the ASH tool can be found in
# a file named "aggregated_results.txt" in the root
# folder of the git repository where the pre-commit
# command was invoked from.
#
- id: ash
  name: Use ASH for SAST/IaC/Secrets scanning
  description: Runs various code scanners from Python directly
  entry: ashv3 --mode=precommit
  language: python
  pass_filenames: false
  args: []
- id: ash-simple-scan
  name: Use ASH for SAST/IaC/Secrets scanning
  description: Runs various code scanners from Python directly
  entry: ashv3 --mode=precommit
  language: python
  pass_filenames: false
  args: []
- id: ash-full-scan
  name: Use ASH for SAST/IaC/Secrets scanning
  description: Runs full ASH scan with container build and all scanners (takes several minutes)
  entry: ashv3 --mode=container --simple
  language: script
  pass_filenames: false
  args: []
